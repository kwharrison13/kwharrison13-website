---
import '../styles/global.css';

export interface Props {
  title?: string;
  description?: string;
}

const { 
  title = 'Kyle Harrison', 
  description = 'Research, capital, and ideas. I lead research at Contrary VC and write about AI, venture markets, cities, and the long arc of ideas.'
} = Astro.props;

const currentPath = Astro.url.pathname;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content={description} />
  <title>{title === 'Kyle Harrison' ? title : `${title} â€” Kyle Harrison`}</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:creator" content="@kwharrison13" />
</head>
<body>

<header class="site-header">
  <div class="header-top">
    <a href="/" class="site-name">Kyle Harrison</a>
    <div class="header-meta">
      Contrary Research &nbsp;Â·&nbsp;
      <a href="https://investing1012dot0.substack.com/" target="_blank" rel="noopener">Newsletter â†—</a>
    </div>
  </div>
  <div class="under-construction">
    <span class="construction-icon">ðŸš§</span> Under Construction
  </div>
  <nav>
    <a href="/essays" aria-current={currentPath.startsWith('/essays') ? 'page' : undefined}>Essays</a>
    <a href="/portfolio" aria-current={currentPath.startsWith('/portfolio') ? 'page' : undefined}>Portfolio Ideas</a>
    <a href="/bookshelf" aria-current={currentPath.startsWith('/bookshelf') ? 'page' : undefined}>Bookshelf</a>
    <a href="/music" aria-current={currentPath.startsWith('/music') ? 'page' : undefined}>Music</a>
    <a href="/videos" aria-current={currentPath.startsWith('/videos') ? 'page' : undefined}>Videos</a>
    <a href="/podcasts" aria-current={currentPath.startsWith('/podcasts') ? 'page' : undefined}>Podcasts</a>
    <a href="/learning" aria-current={currentPath.startsWith('/learning') ? 'page' : undefined}>Learning</a>
    <a href="mailto:kwharrison13@gmail.com">Contact</a>
  </nav>
</header>

<div class="page-content">
  <slot />
</div>

<footer class="site-footer">
  <div class="footer-brand">Kyle Harrison</div>
  <div class="footer-links">
    <a href="mailto:kwharrison13@gmail.com">Email</a>
    <a href="https://twitter.com/kwharrison13" target="_blank" rel="noopener">Twitter</a>
    <a href="https://www.linkedin.com/in/kyle-harrison-9274b278/" target="_blank" rel="noopener">LinkedIn</a>
    <a href="https://investing1012dot0.substack.com/" target="_blank" rel="noopener">Newsletter</a>
  </div>
  <div class="footer-copy">Â© {new Date().getFullYear()} Kyle Harrison Â· Contrary Research</div>
</footer>

<script>
  // Scroll-triggered fade-ins
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(el => {
      if (el.isIntersecting) {
        (el.target as HTMLElement).style.animationPlayState = 'running';
        observer.unobserve(el.target);
      }
    });
  }, { threshold: 0.08 });

  document.querySelectorAll('.fade-up').forEach(el => {
    (el as HTMLElement).style.animationPlayState = 'paused';
    observer.observe(el);
  });
</script>

<style>
.under-construction {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #92400e;
  background: #fef3c7;
  border: 1px solid #fcd34d;
  padding: 4px 10px;
  margin: 6px 0 0 0;
  align-self: flex-end;
}
.construction-icon { font-size: 12px; }
</style>

</body>
</html>
